=========================
Субподрядное производство
=========================

Передать на аутсорсинг производственные нужды компании
не так-то просто. Для правильной организации этого процесса, вам необходимо:

- управлять запасами сырья субподрядчика
- отгружать сырье субподрядчикам в нужное время
- контролировать качество поступающих товаров
- контролировать счета субподрядчиков

Функция субподрядчика MRP (англ. Material Requirements Planning —
планирование потребности в материалах), позволяет легко управлять этими процессами.

Настройки
=========

Функция субподряда доступна в меню: :menuselection:`Производство
--> Настройки --> Настройки`. Поставьте галочку в поле **Субподряд**.

.. image:: media/sbc_1.png
    :align: center

Чтобы определить, должен ли продукт быть субподрядным, используйте **Тип спецификации** - **Субподряд**.

Для создания новой *спецификации*, перейдите в меню: :menuselection:`Производство --> Продукты -->
Спецификации` и нажмите на кнопку **Создать**. Перечислите компоненты,
необходимые стороннему подрядчику для производства продукта. Чтобы рассчитать все затраты,
необходимо указать все компоненты и даже те,
которые получены непосредственно от субподрядчика.

Установите в поле **Тип спецификации** значение **Субподряд** и в поле **Субподрядчики** укажите одного или
несколько субподрядчиков.

Порядок действий
================

Чтобы сообщить субподрядчику, сколько продукции вам необходимо, создайте и
отправьте ему заявку на производство. Для этого перейдите в приложение **Закупки** и
создайте новый заказ на поставку. Обязательно отправьте заявку на производство подрядчику, который
указан как субподрядчик в *спецификации* этих продуктов.

Как только заявка на производство подтверждена, создается отложенная накладная. Когда
продукция будет получена, подтвердите товарную накладную, указав фактическое
количество. Таким образом, система выполняет следующие операции:

- Расходует соответствующие компоненты в месте нахождения субподрядчика, основываясь на *спецификацию* и ваши данные;

- Производит готовую продукцию в месте расположения субподрядчика;

- Перемещает продукцию с места расположения субподрядчика в вашу компанию
  в соответствии с подтвержденной накладной.


.. note::
      Заявка на производство необязательна. Если вы создадите накладную вручную, с указанием
      субподрядчика, система все равно выполнит все перемещения. Это может быть полезно в том случае, если
      субподрядчик не выставляет счет по фиксированной цене за товар, так как время
      и использованные материалы могут варьироваться.

Оценка запасов
==============

Стоимость изготовленного продукта "C" определяется как:

**C = A + B + s**.

Где:

- **A**: Стоимость сырья вашей компании;

- **B**: Стоимость сырья субподрядчика;

- **s**: Стоимость услуг субподрядчика.

Отправка сырья субподрядчикам (**A**) не влияет на оценку запасов,
так как компоненты спецификации по-прежнему оцениваются как часть
ваших запасов. Это определяется за счет настройки опции *Места хранения субподряда* как
*Внутреннее место хранения*.

Цена поставщика, установленная в форме продукта C, должна быть той, которую нужно
оплатить субподрядчику за его материалы и услуги: **B +
s**. Себестоимость продукта должна быть: **A + B + s** - это стоимость продукта в бухгалтерском учете.

В конечном итоге, счет субподрядчика совпадает с заказом на поставку, в котором предложенная стоимость зависит
от цены готовой продукции C.

.. note::
      Если управление пополнением запасов сырья **B** в месте хранения
      субподрядчика не требуется, просто включите расходы
      **В** в стоимость услуг субподрядчика **s** и удалите продукты
      *В* из *спецификации*.

Перемещения
===========

В случае, если полученная от субподрядчика продукция содержит отслеживаемые
компоненты, их серийные номера или номера партий должны быть указаны во время
приемки товара.

Для этого при приемки продукции, в модуле **Склад**, перейдите в меню: **Операции --> Перемещения** и
нажмите на кнопку *Записать компоненты*. В новом окне
укажите серийные номера/номера партий компонентов.
Если готовый продукт также отслеживается, его серийный номер/номер партии может быть указан в этом окне.

В целях аудита можно проверить номера партий, указанных в накладной,
нажав соответствующую иконку справа в строке готовой продукции.

Обратите внимание, что если спецификация субподрядчика создана для продукта, который не отслеживается,
вы все равно можете опционально зарегистрировать компоненты в каждой строке перемещения
при получении конечного продукта.
Это позволит увидеть приблизительный расход компонентов
на месте субподрядчика.

.. image:: media/sbc_5.png
    :align: center
    :alt: 

Таким образом, приемка неотслеживаемых продуктов возможна с помощью кнопки *Указать количество*
или в строке каждого компонента.

Автоматизация восполнения запасов субподрядчиков
================================================

Существует два способа автоматизации снабжения сырьем
субподрядчиков при закупке конечного продукта. Выбор способа
зависит от того, хотите ли вы, чтобы материалы проходили транзитом через ваш
склад или нет. Оба этих метода подразумевают первоначальный заказ субподрядчику,
который создает потребность в сырье для субподрядчика.

Если вы снабжаете субподрядчика сырьем со своего склада,
вам необходимо активировать маршрут 'Пополнение запасов субподрядчика по заказу' в форме продукта.
Если это компонент, который вы покупаете у поставщика, маршрут покупки
также должен быть активирован.

Если вы хотите, чтобы ваш поставщик поставлял субподрядчику продукцию напрямую, вам необходимо
выбрать опцию 'Отгрузка субподрядчику по заказу'. Для того чтобы
эта опция была активна в форме продукта, вы должны сначала активировать опцию дропшиппинга в меню: :menuselection:`Закупки --> Настройки --> Настройки -->
Дроп-шиппинг`.
После утверждения заказа субподрядчику, этот маршрут создаст запрос на поставку товара от поставщика к
субподрядчику. Обратите внимание, что в данном случае не нужно выбирать маршрут покупки, так как
сам по себе маршрут дропшиппинга уже является покупкой.

Наконец, если вы хотите отслеживать эти запасы в месте хранения субподрядчика,
необходимо активировать опцию *Места хранения* в меню :menuselection:`Склад -->
Настройки --> Настройки --> Места хранения`.

Из формы места хранения вы сможете получить доступ к текущему запасу.

.. image:: media/sbc_8.png
    :align: center
    :alt: 


Восполнение запасов вручную
---------------------------

Вы также можете восполнить запасы своих субподрядчиков вручную.

Если вы хотите отправлять компоненты субподрядчику в удобное для вас время,
выберите тип операции 'Восполнение' в модуле *Склад*,
и создайте комплектацию, указав, какому субподрядчику вы осуществляете поставку.

Кроме того, вы можете попросить поставщика пополнить запасы для вашего субподрядчика вручную,
создав заказ на поставку с указанем типа дропшиппинга, где в качестве адреса доставки является местоположение
субподрядчика.
